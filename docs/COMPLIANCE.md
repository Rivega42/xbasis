# 152-ФЗ Compliance Documentation

xBasis разработан с учетом требований Федерального закона №152-ФЗ "О персональных данных".

## Архитектура защиты данных

### Изоляция данных проектов

Каждый проект пользователя использует отдельную PostgreSQL схему:

```sql
-- Создание изолированной схемы для проекта
CREATE SCHEMA project_{uuid};

-- Все таблицы проекта в своей схеме
CREATE TABLE project_{uuid}.users (...);
CREATE TABLE project_{uuid}.data (...);
```

Преимущества:
- Полная изоляция данных между проектами
- Простое удаление всех данных проекта (DROP SCHEMA CASCADE)
- Раздельное резервное копирование
- Контроль доступа на уровне схемы

### Журналирование

Все операции с персональными данными логируются:

```python
audit_log = AuditLog(
    user_id=current_user.id,
    action="data_access",
    resource_type="project",
    resource_id=project_id,
    ip_address=request.client.host,
    timestamp=datetime.utcnow()
)
```

### Шифрование

- **В транзите**: TLS 1.3 для всех соединений
- **В покое**: AES-256 для чувствительных данных
- **Ключи API**: bcrypt хеширование

### Права доступа

```
Owner      — полный доступ
Admin      — управление без удаления
Developer  — разработка без настроек
Viewer     — только чтение
```

## Обработка запросов субъектов ПДн

### Право на доступ (Статья 14)

```http
GET /api/v1/user/data-export
Authorization: Bearer {token}
```

Возвращает все данные пользователя в JSON формате.

### Право на удаление (Статья 21)

```http
DELETE /api/v1/user/account
Authorization: Bearer {token}
```

Полное удаление аккаунта и всех связанных данных.

### Право на исправление (Статья 20)

```http
PATCH /api/v1/user/profile
Authorization: Bearer {token}
```

## Хранение данных

- **Локация**: Российские дата-центры
- **Срок хранения**: согласно политике пользователя
- **Резервные копии**: 30 дней, зашифрованные

## Уведомление об инцидентах

При обнаружении утечки данных:
1. Немедленное уведомление затронутых пользователей
2. Уведомление Роскомнадзора в течение 24 часов
3. Документирование инцидента и принятых мер

## Контакты

Ответственный за обработку ПДн:
- Email: privacy@xbasis.ru
- Телефон: +7 (XXX) XXX-XX-XX
